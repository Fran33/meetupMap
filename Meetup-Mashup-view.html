<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Meetup Map Mashup</title>

    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAApu1FJP7pufT5_nOm518DSxSvWKiAWLhk_sOygIARlDHV5l8aFBTFOaqbJcIfOtEoeNFR3FrF1DJbBg&sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="markermanager.js"></script>
    <script type="text/javascript" src="meetupclient.js"></script>
    <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="Meetup-Mashup-script.js"></script>
    <script type="text/javascript"> 
    var map = null;
    var mgr = null;
    var geocoder = null;

    function initialize() {
      if (GBrowserIsCompatible()) {
        geocoder = new GClientGeocoder();
        map = new GMap2(document.getElementById("map_canvas"));
        var reston = new GLatLng(showAddress("20190"));
        var zoom = 13;
        map.setCenter(reston, zoom);
        mgr = new MarkerManager(map);
        map.setUIToDefault();
      }
    }
    
    function showAddress(address) {
      if (geocoder) {
        geocoder.getLatLng(
          address,
          function(point) {
            if (!point) {
              //alert(address + " not found");
            } else {
              map.setCenter(point, 13);
              //var marker = new GMarker(point);
              //map.addOverlay(marker);
              //marker.openInfoWindowHtml(address);
            }
          }
        );
      }
    }
  </script>

  </head>
  <body onload="" onunload="GUnload()">
    <table border="2">
    <tr>
    <td>
    <div id="map_canvas" style="width: 600px; height: 400px"></div>
    </td>
    <td>
    Status: 
    <span id="status-span">
    </span>
    <form>
        API key: <input type="text" size="10" maxlength="40" id="api-key">
        or <a href="http://www.meetup.com/meetup_api/key/">login to meetup</a> to find your alphanumeric API key
        <br>
        Member ID: <input type="text" size="10" maxlength="40" id="meetup-id" value="1777904">
        or <a href="http://www.meetup.com/profile/">login to meetup</a> to find your numeric member id
        <br>
        <input type="button" value="List Groups" onclick="loadGroupsForMember(document.getElementById('meetup-id'),0)"> 
    </form>
    <span id="groups-span">
      <select id="groups">
      <option value="zero">0</option>
      </select>
    </span>
    <form>
        <input type="button" value="Load Members of Selected Group" onclick="loadMembersForGroup(0)"> 
    </form>
    <span id="members-span">
      <select id="members">
      <option value="zero">0</option>
      </select>
    </span>
    <form>
        <input type="button" value="Map Members of Selected Group" onclick="loadMapWithMembers()"> 
    </form>
    <p>
    <form>
        <input type="button" value="Load Upcoming Events for Selected Group" onclick="loadEventsForGroup(0)"> 
    </form>
    <span id="events-span">
      <select id="events">
      <option value="zero">0</option>
      </select>
    </span>
    <form>
        <input type="button" value="Load Yes RSVPs of Selected Event" onclick="loadRSVPsForEvent(0)"> 
    </form>
    <span id="rsvps-span">
      <select id="rsvps">
      <option value="zero">0</option>
      </select>
    </span>
    <form>
        <input type="button" value="Map Yes RSVPs for Selected Event" onclick="loadMapWithRSVPs()"> 
    </form>
    </td>
    </tr>
    </table>
    <span id="filters-span">
      <select id="filters">
      <option value="zero">0</option>
      </select>
    </span>
    <form>
        <input type="button" value="Add Filter" onclick="showGroupsWithFilter()"> 
    </form>
    <table border="2" id="group-filter-table">
    <th>Group</th><th>topic</th>
    <tr><td>Fairfax Volleyball Group</td><td>volleyball</td></tr>
    <tr><td>Northern VA Hikers</td><td>hiking</td></tr>
    </table>

  </body>
  <script type="text/javascript"> initialize() </script>
</html>